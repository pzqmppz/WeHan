# 给豆包官方的沟通摘要

> 用途：快速向豆包技术支持说明问题

---

## 核心问题

**豆包官方提供的 API 端点与实际测试结果不符。**

---

## 一句话说明

官方说用 `POST /v1/workflow` 创建工作流，但我们测试了 35+ 种端点组合，全部返回 404。

---

## 证据对比

| 功能 | 官方说的 | 实际测试 | 能否复现 |
|-----|---------|---------|---------|
| 创建智能体 | `POST /v1/bot` | 404 | ❌ |
| 创建工作流 | `POST /v1/workflow` | 404 | ❌ |
| 创建知识库 | `POST /v1/knowledge_base` | 404 | ❌ |
| 创建智能体 | `POST /v1/bot/create` | 200 OK | ✅ |

---

## 可复现的测试命令

```bash
# 官方说的（会失败）
curl -X POST "https://api.coze.cn/v1/workflow" \
  -H "Authorization: Bearer pat_YOUR_PAT" \
  -H "Content-Type: application/json" \
  -d '{"space_id": "YOUR_SPACE_ID", "name": "test"}'
# 结果：404 Not Found

# 实际可用的（会成功）
curl -X POST "https://api.coze.cn/v1/bot/create" \
  -H "Authorization: Bearer pat_YOUR_PAT" \
  -H "Content-Type: application/json" \
  -d '{"space_id": "YOUR_SPACE_ID", "name": "test", "prompt": {"system_prompt": "test"}}'
# 结果：200 OK, {"code":0,"msg":"success"}
```

---

## 我们需要的答案

1. **创建工作流的正确 API 端点是什么？**
2. **创建知识库的正确 API 端点是什么？**
3. **这两个 API 是否已对外开放？**

---

## 附件

- 完整测试报告：`Coze-API测试报告-2026-02-28.md`
- 详细问题记录：`Coze-API端点问题咨询.md`
- 测试脚本：`client/main/find_working_endpoints.py`

---

## 联系信息

- **项目**：WeHan 求职助手（武汉高校毕业生留汉服务平台）
- **紧急程度**：🔴 高（阻塞开发进度）
- **测试时间**：2026-02-28 10:15-10:20
- **测试端点数**：35+


# 关于Coze API（工作流/知识库）端点与官方说明不符的紧急咨询
> 致：豆包技术支持团队
> 项目名称：WeHan 求职助手（武汉高校毕业生留汉服务平台）
> 紧急程度：🔴 高（该问题已阻塞项目核心功能开发进度）

## 核心问题（一句话总结）
官方说明的工作流/知识库创建API端点实际调用返回404，我们通过穷举法测试35+种端点组合均未找到可用路径；仅智能体相关非官方端点可正常调用，与官方解答完全不符。

## 测试背景
| 配置项         | 测试值                                                                 |
|----------------|------------------------------------------------------------------------|
| Coze 区域      | 中国区（api.coze.cn）                                                  |
| 认证方式       | PAT（示例：pat_8A26QtZb1Gq06qXOwsS461ssE1q3WtAwnlLd47SEJt5iuSKLk9XQJMZyM8HwYDGQ） |
| SPACE_ID       | 7491691397280874533                                                    |
| 测试方式       | Python requests库 + curl命令穷举测试                                   |
| 测试时间       | 2026-02-28 10:15-10:20                                                 |

## 关键证据：官方说明 vs 实际测试结果
| 功能         | 官方说明端点               | 实际测试结果 | 实际可用端点（仅智能体） |
|--------------|----------------------------|--------------|--------------------------|
| 创建智能体   | POST /v1/bot               | ❌ 404       | POST /v1/bot/create ✅    |
| 更新智能体   | PATCH /v1/bot/{id}         | ❌ 404       | POST /v1/bot/update ✅    |
| 创建工作流   | POST /v1/workflow          | ❌ 404       | 无（测试12种变体均失败） |
| 创建知识库   | POST /v1/knowledge_base    | ❌ 404       | 无（测试8种变体均失败）  |
| 获取智能体列表| -                          | -            | GET /v1/bots?workspace_id={id} ✅ |

## 可复现的测试命令
### 1. 官方工作流端点（失败）
```bash
curl -X POST "https://api.coze.cn/v1/workflow" \
  -H "Authorization: Bearer pat_YOUR_PAT" \
  -H "Content-Type: application/json" \
  -d '{"space_id": "YOUR_SPACE_ID", "name": "测试工作流", "nodes": [], "edges": []}'
# 执行结果：404 Not Found
# 响应内容：{"code":4000,"msg":"The requested API endpoint POST /v1/workflow does not exist..."}
```

### 2. 非官方智能体端点（成功，佐证测试环境有效）
```bash
curl -X POST "https://api.coze.cn/v1/bot/create" \
  -H "Authorization: Bearer pat_YOUR_PAT" \
  -H "Content-Type: application/json" \
  -d '{"space_id": "YOUR_SPACE_ID", "name": "测试智能体", "prompt": {"system_prompt": "test"}}'
# 执行结果：200 OK
# 响应内容：{"code":0,"msg":"success","data":{"bot_id":"xxx"}}
```

## 核心诉求
请明确答复以下3个核心问题，以便我们快速推进项目：
1. 创建/更新工作流的**正确API端点+请求体格式**是什么？
2. 创建知识库/上传文档的**正确API端点+请求体格式**是什么？
3. 工作流、知识库相关API是否已对外开放？若暂未开放，预计开放时间？

## 附件清单
1. 完整测试报告：`Coze-API测试报告-2026-02-28.md`（含35+端点测试全记录）
2. 测试脚本源码：`client/main/find_working_endpoints.py`（可直接复现测试结果）
3. 问题详情记录：`Coze-API端点问题咨询.md`（含参数命名、API版本等衍生问题）

## 联系说明
- 测试环境可随时配合复现验证
- 希望在24小时内得到初步答复，若有需要可提供更多测试日志/权限信息