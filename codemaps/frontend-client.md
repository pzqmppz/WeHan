# C 端技术框架 - WeHan 求职助手

> 基于扣子智能体平台 + 豆包 App，按模块垂直开发原则设计

**更新时间**: 2026-02-27

---

## 一、技术架构

```
┌─────────────────────────────────────────────────────────────┐
│                      C 端技术架构                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐                                        │
│  │   豆包 App      │  ← 用户入口（iOS/Android/小程序）       │
│  │   (用户交互)    │                                        │
│  └────────┬────────┘                                        │
│           │                                                 │
│  ┌────────▼────────┐                                        │
│  │  扣子智能体平台  │  ← Agent 运行环境                      │
│  │  (Coze)         │                                        │
│  └────────┬────────┘                                        │
│           │                                                 │
│     ┌─────┴─────┐                                           │
│     │           │                                           │
│  ┌──▼──┐    ┌───▼───┐                                       │
│  │求职  │    │心理健康│                                       │
│  │Agent│    │ Agent │                                       │
│  └──┬──┘    └───┬───┘                                       │
│     │           │                                           │
│     └─────┬─────┘                                           │
│           │                                                 │
│  ┌────────▼────────────────────────────────────┐            │
│  │                 能力组件                      │            │
│  ├─────────────────────────────────────────────┤            │
│  │ • 实时语音 SDK (@coze/realtime-api)         │            │
│  │ • 工作流 (面试流程、评估报告)                 │            │
│  │ • 知识库 (岗位数据 RAG)                      │            │
│  │ • HTTP 插件 (B 端 API 调用)                  │            │
│  │ • 变量/数据库 (用户数据存储)                 │            │
│  └─────────────────────────────────────────────┘            │
│                         │                                   │
│  ┌──────────────────────▼──────────────────────┐            │
│  │              B 端开放 API                    │            │
│  │  /api/open/jobs, /api/open/applications     │            │
│  └─────────────────────────────────────────────┘            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 二、技术选型

| 组件 | 技术 | 说明 |
|-----|------|-----|
| 智能体平台 | 扣子 (Coze) | Agent 开发、部署 |
| 用户入口 | 豆包 App | iOS/Android/小程序 |
| 实时语音 | @coze/realtime-api | WebSocket 语音 SDK |
| 语音底层 | 火山引擎 Realtime API | 端到端语音模型 |
| 知识库 | 扣子知识库 | RAG 检索增强 |
| 外部调用 | HTTP 插件 | 调用 B 端 API |

---

## 三、智能体设计

### 3.1 求职 Agent

**核心能力**:
| 能力 | 实现方式 | 优先级 |
|-----|---------|-------|
| AI 面试模拟 | 工作流 + 实时语音 SDK | P0 |
| 简历解析 | 文件上传 + 大模型 | P0 |
| 岗位匹配 | 知识库 RAG | P1 |
| 评估报告 | 工作流 + 结构化输出 | P0 |
| 投递管理 | HTTP 插件 | P1 |

**Prompt 框架**:
```markdown
# 角色
你是 WeHan 求职助手，专门帮助武汉高校毕业生进行求职准备和岗位匹配。

## 技能
### 技能1：AI 模拟面试
1. 根据岗位 JD 生成面试题目
2. 通过实时语音进行面试对话
3. 面试结束后生成评估报告

### 技能2：简历解析
1. 解析上传的简历文件
2. 提取关键信息：教育、经历、技能
3. 生成人才画像

### 技能3：岗位匹配
1. 基于简历和偏好搜索岗位
2. 计算匹配度评分
3. 推荐最合适的岗位

## 限制
- 只推荐武汉地区岗位
- 面试评分客观公正
- 不提供虚假承诺
- 保护用户隐私数据
```

**工作流设计**:
```
面试模拟工作流:
┌─────────────────────────────────────────────────────────┐
│  开始                                                    │
│    ↓                                                    │
│  获取岗位 JD ←── HTTP 插件调用 B 端 API                  │
│    ↓                                                    │
│  大模型生成面试题目                                       │
│    ↓                                                    │
│  启动实时语音会话 ←── WebSocket SDK                      │
│    ↓                                                    │
│  多轮对话（动态调整题目）                                  │
│    ↓                                                    │
│  用户结束或超时                                           │
│    ↓                                                    │
│  大模型生成评估报告                                       │
│    ↓                                                    │
│  保存报告 ←── HTTP 插件调用 B 端 API                     │
│    ↓                                                    │
│  结束                                                    │
└─────────────────────────────────────────────────────────┘
```

---

### 3.2 心理健康 Agent

**核心能力**:
| 能力 | 实现方式 | 优先级 |
|-----|---------|-------|
| 情绪咨询 | Prompt + 对话 | P0 |
| 实时倾诉 | 实时语音 SDK | P1 |
| 情绪记录 | 变量 + 数据库 | P1 |
| 心理测评 | 工作流 | P2 |

**Prompt 框架**:
```markdown
# 角色
你是 WeHan 心理健康助手，专门为武汉高校毕业生提供情绪支持和心理疏导。

## 技能
### 技能1：情绪倾听
1. 耐心倾听用户的烦恼
2. 给予共情和理解
3. 引导用户表达真实感受

### 技能2：心理疏导
1. 识别情绪类型
2. 提供应对建议
3. 推荐专业资源（必要时）

### 技能3：情绪记录
1. 记录每次咨询的情绪状态
2. 追踪情绪变化趋势
3. 定期提醒用户关注心理健康

## 限制
- 不提供医疗诊断
- 发现自伤倾向立即建议就医
- 保守用户隐私
- 保持温暖、专业的态度
```

---

## 四、模块垂直开发计划

### 模块 1：求职 Agent 基础版（5 天）

**扣子平台配置**:

| 步骤 | 内容 | 工时 |
|-----|------|-----|
| 1. 创建智能体 | 名称、图标、简介 | 0.5 天 |
| 2. 编写 Prompt | 结构化人设与技能 | 1 天 |
| 3. 配置开场白 | 欢迎语 + 引导问题 | 0.5 天 |
| 4. 测试对话 | 多轮对话调试 | 1 天 |
| 5. 发布到豆包 | 审核与发布 | 1 天 |
| 6. 分享链接 | 配置访问链接 | 0.5 天 |

**验收标准**:
- ✅ 豆包 App 可搜索到智能体
- ✅ 基础对话功能正常
- ✅ 开场白正确显示

---

### 模块 2：实时语音集成（5 天）

**技术实现**:

```typescript
// 前端示例（如需 Web 嵌入）
import { RealtimeClient, RealtimeUtils } from '@coze/realtime-api';

const client = new RealtimeClient({
  accessToken: getToken,
  botId: 'bot_xxx',
  connectorId: '1024',
  voiceId: '7426720361733046281',
  allowPersonalAccessTokenInBrowser: true,
  debug: true,
});

// 连接
await client.connect();

// 切换麦克风
await client.setAudioEnable(true);

// 打断
client.interrupt();

// 断开
client.disconnect();
```

**扣子配置**:

| 配置项 | 值 | 说明 |
|-------|---|-----|
| input_audio.format | pcm | 输入格式 |
| input_audio.sample_rate | 24000 | 采样率 |
| output_audio.codec | pcm | 输出编码 |
| output_audio.voice_id | 精品音色 | 音色 ID |
| turn_detection.type | semantic_vad | 语音检测 |

**验收标准**:
- ✅ 语音对话延迟 < 500ms
- ✅ 语义 VAD 正常工作
- ✅ 打断功能正常
- ✅ 语音清晰无杂音

---

### 模块 3：面试模拟工作流（7 天）

**工作流节点设计**:

```
┌──────────────────────────────────────────────────────────┐
│                   面试模拟工作流                          │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  [开始节点]                                               │
│      │                                                   │
│      ▼                                                   │
│  [输入节点] 接收参数：job_id, user_id                     │
│      │                                                   │
│      ▼                                                   │
│  [HTTP 节点] GET /api/open/jobs/{job_id}                 │
│      │ 获取岗位 JD                                       │
│      ▼                                                   │
│  [大模型节点] 生成面试题目                                 │
│      │ 输入：JD + 岗位类别                                │
│      │ 输出：5-10 道面试题                                │
│      ▼                                                   │
│  [变量节点] 存储题目列表                                   │
│      │                                                   │
│      ▼                                                   │
│  [交互节点] 启动语音面试                                   │
│      │ 逐题提问，收集回答                                  │
│      ▼                                                   │
│  [大模型节点] 评估回答                                     │
│      │ 输入：题目 + 回答                                  │
│      │ 输出：评分 + 点评                                  │
│      ▼                                                   │
│  [大模型节点] 生成报告                                     │
│      │ 输入：所有评分 + 点评                              │
│      │ 输出：结构化评估报告                               │
│      ▼                                                   │
│  [HTTP 节点] POST /api/open/interviews                   │
│      │ 保存报告到 B 端                                   │
│      ▼                                                   │
│  [输出节点] 返回报告给用户                                 │
│      │                                                   │
│      ▼                                                   │
│  [结束节点]                                               │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

**评估报告结构**:

```json
{
  "totalScore": 78,
  "dimensions": [
    { "name": "专业知识", "score": 85, "maxScore": 100 },
    { "name": "表达能力", "score": 72, "maxScore": 100 },
    { "name": "逻辑思维", "score": 80, "maxScore": 100 },
    { "name": "应变能力", "score": 75, "maxScore": 100 }
  ],
  "highlights": [
    { "question": "...", "answer": "...", "score": 90 }
  ],
  "improvements": [
    { "area": "表达能力", "suggestion": "建议多练习结构化表达..." }
  ],
  "suggestions": "整体表现良好，建议加强..."
}
```

**验收标准**:
- ✅ 根据 JD 生成针对性题目
- ✅ 面试过程流畅
- ✅ 评估报告结构完整
- ✅ 报告保存到 B 端数据库

---

### 模块 4：简历解析（4 天）

**实现方式**:

| 步骤 | 内容 |
|-----|------|
| 1. 用户上传简历 | PDF/Word/图片 |
| 2. 大模型解析 | 提取结构化信息 |
| 3. 生成人才画像 | 总结优势、技能 |
| 4. 存储数据 | 调用 B 端 API 保存 |

**解析输出结构**:

```json
{
  "name": "张三",
  "phone": "13800138000",
  "email": "zhangsan@example.com",
  "education": [
    {
      "school": "武汉大学",
      "major": "计算机科学",
      "degree": "本科",
      "startDate": "2020-09",
      "endDate": "2024-06"
    }
  ],
  "experiences": [...],
  "skills": ["JavaScript", "React", "Node.js"],
  "profile": {
    "summary": "具备扎实的前端开发能力...",
    "strengths": ["技术栈全面", "项目经验丰富"],
    "careerGoals": "希望从事前端开发工作"
  }
}
```

---

### 模块 5：岗位匹配（5 天）

**知识库配置**:

| 配置项 | 说明 |
|-------|------|
| 数据源 | B 端岗位 API 定时同步 |
| 更新频率 | 每小时 |
| 索引字段 | title, description, skills, location |
| 检索方式 | 语义相似度 + 关键词 |

**HTTP 插件配置**:

```json
{
  "name": "岗位搜索",
  "method": "GET",
  "url": "https://api.wehan.com/api/open/jobs",
  "headers": {
    "Authorization": "Bearer {api_key}"
  },
  "params": {
    "keyword": "{{user_input}}",
    "location": "武汉",
    "limit": 10
  }
}
```

**匹配算法**:
1. 用户画像 → 向量化
2. 岗位描述 → 向量化
3. 计算余弦相似度
4. 返回 Top N 岗位 + 匹配分数

---

### 模块 6：心理健康 Agent（5 天）

**扣子平台配置**:

| 步骤 | 内容 | 工时 |
|-----|------|-----|
| 1. 创建智能体 | 独立于求职 Agent | 0.5 天 |
| 2. 编写 Prompt | 心理疏导人设 | 1.5 天 |
| 3. 配置变量 | 情绪记录存储 | 1 天 |
| 4. 实时语音 | 语音倾诉功能 | 1.5 天 |
| 5. 测试发布 | 对话测试 + 发布 | 0.5 天 |

**情绪记录存储**:

```json
{
  "user_id": "xxx",
  "emotion_records": [
    {
      "date": "2026-02-27",
      "emotion": "anxious",
      "score": 6,
      "summary": "因面试准备感到焦虑"
    }
  ]
}
```

---

## 五、B 端 API 集成

### 开放 API 调用映射

| C 端功能 | B 端 API | 方法 |
|---------|---------|------|
| 获取岗位列表 | /api/open/jobs | GET |
| 获取岗位详情 | /api/open/jobs/{id} | GET |
| 提交投递 | /api/open/applications | POST |
| 获取面试报告 | /api/open/interviews/{id} | GET |
| 保存简历 | /api/open/resumes | POST |
| 获取政策列表 | /api/open/policies | GET |

### HTTP 插件配置示例

```json
{
  "plugins": [
    {
      "name": "WeHan岗位服务",
      "api": {
        "base_url": "https://api.wehan.com/api/open",
        "auth": {
          "type": "bearer",
          "token": "{{api_key}}"
        },
        "endpoints": [
          {
            "name": "搜索岗位",
            "method": "GET",
            "path": "/jobs",
            "params": ["keyword", "industry", "limit"]
          },
          {
            "name": "提交投递",
            "method": "POST",
            "path": "/applications",
            "body": ["user_id", "job_id", "resume_id"]
          }
        ]
      }
    }
  ]
}
```

---

## 六、用户体验流程

### 求职流程

```
用户打开豆包 App
    ↓
搜索/点击 WeHan 求职助手
    ↓
┌─────────────────────────────┐
│ 开场白：                     │
│ "你好！我是 WeHan 求职助手， │
│  可以帮你模拟面试、解析简历、│
│  匹配武汉的优质岗位..."      │
│                             │
│ 你想做什么？                 │
│ 1. 🎤 AI 模拟面试           │
│ 2. 📄 上传简历              │
│ 3. 🔍 搜索岗位              │
└─────────────────────────────┘
    ↓
用户选择功能
    ↓
    ├─→ 面试：选择岗位 → 语音面试 → 查看报告
    ├─→ 简历：上传文件 → AI 解析 → 确认信息
    └─→ 搜索：输入关键词 → 查看岗位 → 一键投递
```

### 心理咨询流程

```
用户打开心理健康 Agent
    ↓
┌─────────────────────────────┐
│ 开场白：                     │
│ "你好呀！今天感觉怎么样？    │
│  有什么想聊的吗？"          │
└─────────────────────────────┘
    ↓
用户倾诉（文字/语音）
    ↓
AI 共情回复 + 引导
    ↓
记录情绪状态
    ↓
提供应对建议
```

---

## 七、开发优先级

```
P0 - MVP 核心功能
├── 模块 1: 求职 Agent 基础版
├── 模块 2: 实时语音集成
└── 模块 3: 面试模拟工作流

P1 - 重要功能
├── 模块 4: 简历解析
├── 模块 5: 岗位匹配
└── B 端 API 集成

P2 - 扩展功能
├── 模块 6: 心理健康 Agent
└── 情绪记录追踪
```

---

## 八、联调测试清单

### C 端独立测试

| 测试项 | 验收标准 |
|-------|---------|
| 智能体对话 | 多轮对话流畅，无死循环 |
| 语音通话 | 延迟 < 500ms，打断正常 |
| 面试流程 | 题目生成合理，报告完整 |
| 简历解析 | 字段提取准确率 > 90% |

### C-B 端联调测试

| 测试项 | 验收标准 |
|-------|---------|
| 岗位搜索 | 返回武汉地区真实岗位 |
| 投递功能 | C 端投递 → B 端可见 |
| 报告同步 | 面试报告保存到 B 端 |
| 数据隔离 | 用户只能看到自己的数据 |

---

## 九、部署与发布

### 发布流程

```
1. 扣子平台开发完成
    ↓
2. 内部测试（预览模式）
    ↓
3. 发布到豆包（提交审核）
    ↓
4. 审核通过（1-3 天）
    ↓
5. 豆包 App 上线
    ↓
6. 生成分享链接
    ↓
7. 推广运营
```

### 监控指标

| 指标 | 目标值 |
|-----|-------|
| 对话成功率 | > 95% |
| 语音接通率 | > 98% |
| 平均响应时间 | < 2s |
| 用户满意度 | > 4.5/5 |

---

*文档版本: 1.0 | 生成时间: 2026-02-27*
