# 扣子知识库使用

## 概述

知识库是扣子实现 RAG（检索增强生成）的核心能力，支持上传外部数据，自动分段和编码，让智能体在回答问题时参考知识库内容。

## RAG 技术原理

RAG（Retrieval-Augmented Generation）包含两个关键阶段：

1. **检索阶段**：使用编码模型基于问题检索相关文档
2. **生成阶段**：使用检索到的上下文作为条件生成文本

**优势**：有效解决大模型的幻觉问题，让模型回答基于真实数据。

## 创建知识库

### 1. 进入知识库管理

扣子平台 → 个人中心 → 知识库 → 点击「+」创建

### 2. 选择数据类型

| 类型 | 说明 |
|-----|------|
| 文本格式 | TXT、Markdown 等 |
| 表格格式 | CSV、Excel 等 |
| 图片类型 | JPG、PNG（需标注描述） |
| 网页类型 | URL 在线抓取 |

### 3. 导入数据源

| 数据源 | 说明 |
|-------|------|
| 本地上传 | 上传本地文件 |
| 网页抓取 | 输入 URL 自动抓取 |
| 飞书 | 从飞书文档导入 |
| Notion | 从 Notion 页面导入 |
| 自定义 | API 方式导入 |

### 4. 解析设置

**解析模式：**
- **精准解析**：更准确的分段，适合结构化文档
- **快速解析**：快速处理，适合大量文档

**分段方式：**
- **按段落分段**：根据段落自动分割
- **按层级分段**：根据标题层级分割

## 知识库配置

### 添加到智能体

1. 进入智能体编排页面
2. 点击「技能」→「知识库」→「+」
3. 选择已创建的知识库
4. 确认添加

### 调用模式

- **自动调用**：智能体自动判断何时检索知识库
- **手动调用**：通过 Prompt 明确指示检索

## Prompt 配合知识库

```markdown
# 角色
你是留学知识库的智能助手，能够以清晰易懂的方式解答问题。

## 技能
### 技能1：解答业务问题
1. 当用户提出问题时，**优先从知识库中检索**相关信息
2. 如果知识库中没有相关内容，使用工具搜索
3. 以简洁明了的语言阐述答案

===回复示例===
**问题**：<用户问题>
**答案**：<详细解答>
===示例结束===

## 限制
- 只讨论与业务相关的内容
- 优先输出知识库中已有内容
- 使用 Markdown 的 ^ ^ 形式说明引用来源
```

## 应用场景

| 场景 | 说明 |
|-----|------|
| 产品资料问答 | 用户手册、说明书问答 |
| 客服问答 | 常见问题自动回复 |
| 企业知识库 | 内部文档、流程查询 |
| 培训资料学习 | 新员工培训材料 |
| 法律法规查询 | 法律条文检索 |

## 最佳实践

### 1. 文档准备
- 确保文档内容准确、完整
- 使用清晰的标题和段落结构
- 避免过大文件，建议拆分

### 2. 分段优化
- 根据内容特点选择分段方式
- 调整分段大小，平衡检索精度和上下文完整性

### 3. Prompt 设计
- 明确指示优先使用知识库
- 设置引用来源格式
- 限制回答范围

### 4. 持续优化
- 收集用户反馈
- 补充缺失内容
- 定期更新知识库

## 火山方舟知识库

扣子的知识库能力由火山方舟知识库提供，支持：
- 大规模向量检索
- 多种数据导入方式（URL、TOS、API）
- 实时数据更新

## 相关链接

- 知识库文档: https://docs.coze.cn/guides/knowledge_base
- RAG 教程: https://www.coze.cn/api/open/docs/tutorial/product_knowledge_bot
